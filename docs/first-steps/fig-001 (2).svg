<?xml version="1.0" encoding="utf-8" standalone="no"?>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" viewBox="-255 -5 510 1310" width="510" height="1310" stroke="#303060" stroke-width="1" fill="none" font-family = "Times New Roman" font-size="16" text-anchor="middle" >

<style type="text/css"><![CDATA[ 
.box {   }
text  { stroke-width : 0 ; stroke : none ; fill : #606060 }
circle { stroke-width : 2 }
.circle text { text-align : right }  
line { stroke : #606060 }
]]></style>

<marker id="arrow" orient="auto" refY="0" refX="0" style="overflow:visible">
    <path d="M -15 -5 L 0 0 -15 5 A 10 10 30 0 0 -15 -5 z " />
    </marker>

<g transform="translate(0 20)">
	<circle cx="0" cy="0" r="15" />
	<text x="-40" y="5" >Start</text>
	<line x1="0" y1="15" x2="0" y2="45" marker-end=" url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 80 )">
	<rect x="-120" y="-15" width="240" height="30" />
	<text x="0" y="5" >Compile the list of import files</text>
	<line x1="0" y1="15" x2="0" y2="45" marker-end=" url(#arrow)"/>
	</g>
<g transform="translate(0 135)">
	<circle cx="0" cy="0" r="10" />
	<text x="-35" y="5" >Next</text>
	<line x1="0" y1="10" x2="0" y2="40" marker-end=" url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 200 )">
	<rect x="-120" y="-25" width="240" height="50" />
	<text x="0" y="-5" >Pick topmost file</text>
	<text x="0" y="12" >from the list</text>
	<line x1="0" y1="25" x2="0" y2="55" marker-end=" url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 295 )">
	<path d="M 0 -40 L 70 0 0 40 -70 0 z" />
	<text x="0" y="-5" >DDL Code</text>
	<text x="0" y="12" >postponed</text>
	<text x="0" y="30" >?</text>
	<text x="-90" y="-10" >no</text>
	<text x="-25" y="55" >yes</text>
	<line x1="0" y1="40" x2="0" y2="70" marker-end=" url(#arrow)"/>
	<path d="M -70 0 l -90 0 a 20 20 90 0 0 -20 20 l 0 110" marker-end="url(#arrow)" />
	</g>
<g class="box" transform="translate( 0 365 )">
	<rect x="-120" y="0" width="240" height="30" />
	<text x="0" y="20" >Move Code back to work.sql</text>
	<line x1="0" y1="30" x2="0" y2="60" marker-end=" url(#arrow)"/>
	</g>
<g transform="translate(-180 435)">
	<circle cx="0" cy="0" r="10" />
	<line x1="10" y1="0" x2="170" y2="0" marker-end=" url(#arrow)"/>
	</g>
<g transform="translate(0 435)">
	<circle cx="0" cy="0" r="10" />
	<text x="35" y="5" >Retry</text>
	<line x1="0" y1="10" x2="0" y2="40" marker-end=" url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 500 )">
	<rect x="-120" y="-25" width="240" height="50" />
	<text x="0" y="-5" >Create/edit table DDL</text>
	<text x="0" y="12" >code in work.sql</text>
	<line x1="0" y1="25" x2="0" y2="55" marker-end=" url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 570 )">
	<rect x="-120" y="-15" width="240" height="30" />
	<text x="0" y="5" >Run work.sql in PSQL</text>
	<line x1="0" y1="15" x2="0" y2="45" marker-end=" url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 635 )">
	<path d="M 0 -20 L 70 0 0 20 -70 0 z" />
	<text x="0" y="5" >Success?</text>
	<text x="-90" y="-10" >no</text>
	<text x="-25" y="35" >yes</text>
	<line x1="0" y1="20" x2="0" y2="50" marker-end=" url(#arrow)"/>
	<path d="M -70 0 l -70 0 a 20 20 90 0 0 -20 20 l 0 275 a 20 20 90 0 0 20 20 l 20 0" marker-end="url(#arrow)" />
	</g>
<g class="box" transform="translate( 0 720 )">
	<rect x="-120" y="-35" width="240" height="70" />
	<text x="0" y="-15" >1. Delete topmost entry from the list</text>
	<text x="0" y="4" >2. Move code from work.sql</text>
	<text x="0" y="24" >to the end of create-tables.sql</text>
	<line x1="0" y1="35" x2="0" y2="65" marker-end="url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 805 )">
	<path d="M 0 -20 L 70 0 0 20 -70 0 z" />
	<text x="0" y="5" >List empty?</text>
	<text x="90" y="-10" >no</text>
	<text x="-25" y="35" >yes</text>
	<line x1="70" y1="0" x2="190" y2="0" marker-end="url(#arrow)"/>
	<line x1="0" y1="20" x2="0" y2="50" marker-end="url(#arrow)"/>
	</g>
<g transform="translate(0 805)">
	<circle cx="200" cy="0" r="10" />
	<path d="M 200 -10 l 0 -640 a 20 20 90 0 0 -20 -20 l -170 0" marker-end=" url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 870 )">
	<circle cx="0" cy="0" r="15" />
	<text x="-40" y="3" >Done</text>
	</g>
<g class="box" transform="translate( 0 935 )">
	<rect x="-120" y="0" width="240" height="30" />
	<text x="0" y="20" >Drop target table if exists</text>
	<line x1="0" y1="30" x2="0" y2="60" marker-end="url(#arrow)"/>
	</g>
<g class="box" transform="translate( 0 1020 )">
	<path d="M 0 -25 L 70 0 0 25 -70 0 z" />
	<text x="0" y="5" >Syntax error?</text>
	<text x="-90" y="-10" >yes</text>
	<text x="25" y="35" >no</text>
	<path d="M -70 0 l -90 0 a 20 20 90 0 1 -20 -20 l 0 -555"  marker-end="url(#arrow)" />
	<line x1="0" y1="25" x2="0" y2="85" marker-end=" url(#arrow)"/>
	</g>
<g transform="translate( 0 1040 )" text-anchor="end">
	<text x="-20" y="20" >Referenced parent</text>
	<text x="-20" y="38" >table does not exist</text>
	</g>
<g class="box" transform="translate( 0 1105 )">
	<rect x="-120" y="0" width="240" height="95" />
	<text x="0" y="20" >1. Move work.sql content</text>
	<text x="0" y="38" >to top of postponed.sql</text>
	<text x="0" y="60" >2. Move entry for missing table</text>
	<text x="0" y="78" >to top of import file list</text>
	<path d="M 0 95 l 0 20 a 20 20 90 0 0 20 20 l 160 0 a 20 20 90 0 0 20 -20 l 0 -405" marker-end=" url(#arrow)" />
	</g>

</svg>
